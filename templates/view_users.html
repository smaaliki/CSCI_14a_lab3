{% extends "layout.html" %}

{% block content %}
  <main class="hero-section">
    <div class="container">
      <div class="section-content">
      	<h2>Users in Database</h2>
      	<p>Below is a list of all the users in the system</p>
			<table class="table">
		      	<thead>
		      		<tr>
			      		<th scope="col">Name</th>
						<th scope="col">Age</th>
			      		<th scope="col">Email</th>
			      		<th scope="col">Actions</th>
		      		</tr>
		      	</thead>
		      	<tbody>
		      	{% for user in users %}
		    	<tr>
			    	<td>{{ user.first_name }} {{ user.last_name }}</td>
			    	<td>{{ user.age }}</td>
			    	<td>{{ user.email }}</td>
			    	<td>
			    		<a href="/edit-user?userId={{user.user_id}}">
			    			<img src="../static/img/pencil-and-paper.png" height="21px" width="21px" alt="edit user">
			    		</a>
			    		<a href="/delete-user?userId={{user.user_id}}" class="delete" data-confirm="Are you sure you want to delete this user?">	<img src="../static/img/rubbish-bin.png" height="21px" width="21px" alt="delete user">
			    		</a>
					</td>
				</tr>
		    	{% endfor %}
		    	</tbody>
	    	</table>
      	</form>
      </div>
      </div>
	  <div>Icons made by <a href="https://www.flaticon.com/authors/icon-works" title="Icon Works">Icon Works</a> from <a href="https://www.flaticon.com/"             title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/"             title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>
	  </div>
	</main>
<script>
	<!--https://codepen.io/anon/pen/NqdKZq-->
    var deleteLinks = document.querySelectorAll('.delete');

for (var i = 0; i < deleteLinks.length; i++) {
  deleteLinks[i].addEventListener('click', function(event) {
	  event.preventDefault();

	  var choice = confirm(this.getAttribute('data-confirm'));

	  if (choice) {
	    window.location.href = this.getAttribute('href');
	  }
  });
}
</script> 
  
{% endblock %}